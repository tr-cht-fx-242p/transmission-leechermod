// Rich Adams <rich@richadams.me> - CC BY 3.0
!function(a){var n={duration:1e3,clickHandler:null};function e(t){var a=jQuery(this);if(settings=jQuery.extend({},n,t.data),void 0!==a.data("events")&&void 0!==a.data("events").click){for(var e in a.data("events").click)if(""==a.data("events").click[e].namespace){var d=a.data("events").click[e].handler;a.data("taphold_click_handler",d),a.unbind("click",d);break}}else"function"==typeof settings.clickHandler&&a.data("taphold_click_handler",settings.clickHandler);a.data("taphold_triggered",!1),a.data("taphold_clicked",!1),a.data("taphold_cancelled",!1),a.data("taphold_timer",setTimeout(function(){a.data("taphold_cancelled")||a.data("taphold_clicked")||(a.trigger(jQuery.extend(t,jQuery.Event("taphold"))),a.data("taphold_triggered",!0))},settings.duration))}function d(t){var a=jQuery(this);a.data("taphold_cancelled")||(clearTimeout(a.data("taphold_timer")),a.data("taphold_triggered")||a.data("taphold_clicked")||("function"==typeof a.data("taphold_click_handler")&&a.data("taphold_click_handler")(jQuery.extend(t,jQuery.Event("click"))),a.data("taphold_clicked",!0)))}function c(t){a(this).data("taphold_cancelled",!0)}var i="ontouchstart"in window||"onmsgesturechange"in window;a.event.special.taphold={setup:function(t){a(this).bind(i?"touchstart":"mousedown",t,e).bind(i?"touchend":"mouseup",d).bind(i?"touchmove touchcancel":"mouseleave",c)},teardown:function(t){a(this).unbind(i?"touchstart":"mousedown",e).unbind(i?"touchend":"mouseup",d).unbind(i?"touchmove touchcancel":"mouseleave",c)}}}(jQuery);
